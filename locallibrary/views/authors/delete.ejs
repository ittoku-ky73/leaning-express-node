<h1><%= `${title}: ${author.name}` %></h1>
<p><%= author.lifespan %></p>
<% if (author_books.length) { %>
  <p>
    <strong>Delete the following books before attempting to delete this author</strong>
  </p>
  <div class="mt-3 ms-3">
    <h4>Books</h4>
    <dl>
      <% author_books.forEach(book => { %>
        <dt><a href=<%= book.url %>><%= book.title %></a></dt>
        <dd><%= book.summary %></dd>
      <% }) %>
    </dl>
  </div>
<% } else { %>
  <p>Do you really want to delete this Author?</p>
  <form action="" method="post">
    <div class="form-group">
      <input
        type="hidden"
        name="author[id]"
        id="author_id"
        class="form-control"
        required
        value=<%= author._id %>
      >
    </div>
    <input type="submit" class="btn btn-primary" value="Delete author">
    <script>
      const deleteForm = document.querySelector('form');

      deleteForm.addEventListener('submit', (e) => {
        (window.confirm('削除してもよろしいですか？'))
          ? 'Delete'
          : e.preventDefault();
      });
    </script>
  </form>
<% } %>
